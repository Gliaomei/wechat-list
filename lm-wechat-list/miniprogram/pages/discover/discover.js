"use strict";
var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Page({
    data: {
        dataList: [],
        loading: false,
        navbarData: [],
    },
    onLoad: function (option) {
        this.getShowList();
        var pages = getCurrentPages();
        if (pages[pages.length - 2].route === 'pages/search-page/index' && option.keyword) {
            var list = [option.keyword];
            list.push();
            this.setData({
                navbarData: list
            });
        }
        else {
            this.setData({
                navbarData: ["Ozworld", "看见每一种可能", "2020欧洲杯", "LOVE UNITES新系列", "ADIZERO PRIME X"],
            });
        }
    },
    getShowList: function () {
        var that = this;
        this.setData({ loading: true });
        wx.request({
            url: 'https://example.com/showlist',
            dataType: 'json',
            success: function (res) {
                that.setData({ loading: false });
                wx.stopPullDownRefresh();
                that.setData({ dataList: res.data.list }, function () {
                    wx.hideLoading();
                });
            }
        });
    },
    onReachBottom: function () {
        var changeList = __spreadArray([], this.data.dataList);
        var tmpArr = [];
        for (var i = 0; i < changeList.length; i++) {
            var index = parseInt(Math.random() * 100) % changeList.length;
            tmpArr.push(changeList[index]);
            changeList.splice(index, 1);
        }
        var dataList = this.data.dataList.concat(tmpArr);
        this.setData({ dataList: dataList }, function () {
            wx.hideLoading();
        });
    },
    onPullDownRefresh: function () {
        this.setData({ dataList: [] });
        this.getShowList();
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY292ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkaXNjb3Zlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFLQSxJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixRQUFRLEVBQUUsRUFBRTtRQUNaLE9BQU8sRUFBRSxLQUFLO1FBQ2QsVUFBVSxFQUFFLEVBQUU7S0FDZjtJQUNELE1BQU0sRUFBTixVQUFPLE1BQU07UUFDWCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsSUFBSSxLQUFLLEdBQUcsZUFBZSxFQUFFLENBQUM7UUFFOUIsSUFBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUsseUJBQXlCLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBQztZQUMvRSxJQUFJLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUMzQixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUE7WUFDWCxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLFVBQVUsRUFBRSxJQUFXO2FBQ3hCLENBQUMsQ0FBQTtTQUNIO2FBQUk7WUFDSCxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLFVBQVUsRUFBRSxDQUFDLFNBQVMsRUFBQyxTQUFTLEVBQUMsU0FBUyxFQUFDLGdCQUFnQixFQUFDLGlCQUFpQixDQUFRO2FBQ3RGLENBQUMsQ0FBQTtTQUNIO0lBQ0gsQ0FBQztJQUVELFdBQVcsRUFBRTtRQUNYLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDaEMsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULEdBQUcsRUFBRSw4QkFBOEI7WUFDbkMsUUFBUSxFQUFFLE1BQU07WUFDaEIsT0FBTyxFQUFQLFVBQVEsR0FBTztnQkFDYixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ2pDLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFBO2dCQUN4QixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7b0JBQ3hDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtnQkFDbEIsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELGFBQWEsRUFBRTtRQUNiLElBQUksVUFBVSxxQkFBbUIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVyRCxJQUFJLE1BQU0sR0FBZSxFQUFFLENBQUM7UUFDNUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDMUMsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFVLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDO1lBQ3JFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDL0IsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDN0I7UUFDRCxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBYSxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsRUFBRTtZQUNuQyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUE7UUFDbEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsaUJBQWlCLEVBQUU7UUFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbG9ncy50c1xuLy8gY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3V0aWwuanMnKVxuLy8gaW1wb3J0IHsgZm9ybWF0VGltZSB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnXG5cbi8vIC0tLS0tLS0tLS0tLS3nrKzkuIDnp43mlrnms5UtLS0tLS0tLS0tLS0tXG5QYWdlKHtcbiAgZGF0YToge1xuICAgIGRhdGFMaXN0OiBbXSwgLy/mlbDmja7mupBcbiAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICBuYXZiYXJEYXRhOiBbXSxcbiAgfSxcbiAgb25Mb2FkKG9wdGlvbik6dm9pZCB7XG4gICAgdGhpcy5nZXRTaG93TGlzdCgpO1xuICAgIGxldCBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgIC8vIOS7juaQnOe0oumhtemdoui/m+WFpVxuICAgIGlmKHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdLnJvdXRlID09PSAncGFnZXMvc2VhcmNoLXBhZ2UvaW5kZXgnICYmIG9wdGlvbi5rZXl3b3JkKXtcbiAgICAgIGxldCBsaXN0ID0gW29wdGlvbi5rZXl3b3JkXVxuICAgICAgbGlzdC5wdXNoKClcbiAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgIG5hdmJhckRhdGE6IGxpc3QgYXMgYW55XG4gICAgICB9KVxuICAgIH1lbHNle1xuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgbmF2YmFyRGF0YTogW1wiT3p3b3JsZFwiLFwi55yL6KeB5q+P5LiA56eN5Y+v6IO9XCIsXCIyMDIw5qyn5rSy5p2vXCIsXCJMT1ZFIFVOSVRFU+aWsOezu+WIl1wiLFwiQURJWkVSTyBQUklNRSBYXCJdIGFzIGFueSxcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuICAvLyDojrflj5bliJfooahcbiAgZ2V0U2hvd0xpc3Q6IGZ1bmN0aW9uKCk6dm9pZCB7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuc2V0RGF0YSh7IGxvYWRpbmc6IHRydWUgfSk7XG4gICAgd3gucmVxdWVzdCh7XG4gICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Nob3dsaXN0JyxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBzdWNjZXNzKHJlczphbnkpIHtcbiAgICAgICAgdGhhdC5zZXREYXRhKHsgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIHd4LnN0b3BQdWxsRG93blJlZnJlc2goKSAvL+WBnOatouS4i+aLieWIt+aWsFxuICAgICAgICB0aGF0LnNldERhdGEoeyBkYXRhTGlzdDogcmVzLmRhdGEubGlzdCB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgIHd4LmhpZGVMb2FkaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgLy8g5LiK5ouJ5Yqg6L295pu05aSaXG4gIG9uUmVhY2hCb3R0b206IGZ1bmN0aW9uKCk6dm9pZCB7XG4gICAgbGV0IGNoYW5nZUxpc3Q6IEFycmF5PGFueT4gPSBbLi4udGhpcy5kYXRhLmRhdGFMaXN0XTtcblxuICAgIGxldCB0bXBBcnI6IEFycmF5PGFueT4gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5nZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpbmRleCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAxMDAgYXMgYW55KSAlIGNoYW5nZUxpc3QubGVuZ3RoO1xuICAgICAgdG1wQXJyLnB1c2goY2hhbmdlTGlzdFtpbmRleF0pO1xuICAgICAgY2hhbmdlTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBsZXQgZGF0YUxpc3QgPSB0aGlzLmRhdGEuZGF0YUxpc3QuY29uY2F0KHRtcEFyciBhcyBhbnkpO1xuICAgIHRoaXMuc2V0RGF0YSh7IGRhdGFMaXN0OiBkYXRhTGlzdCB9LCBmdW5jdGlvbigpe1xuICAgICAgd3guaGlkZUxvYWRpbmcoKVxuICAgIH0pO1xuICB9LFxuICAvLyDkuIvmi4nliLfmlrBcbiAgb25QdWxsRG93blJlZnJlc2g6IGZ1bmN0aW9uKCk6dm9pZCB7XG4gICAgdGhpcy5zZXREYXRhKHsgZGF0YUxpc3Q6IFtdIH0pO1xuICAgIHRoaXMuZ2V0U2hvd0xpc3QoKTtcbiAgfSxcbn0pXG5cbiJdfQ==